<%- model_class = Project -%>
<div class="page-header">

	<h1><%= @project.title %></h1>

</div>

<table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp">
	<thead>
		<tr>
			<th><%= model_class.human_attribute_name(:title) %></th>
			<th><%=t '.actions', :default => t("helpers.actions") %></th>
		</tr>
	</thead>
	<tbody>
		<% @project.tasks.each do |task| %>
			<tr>
				<td>
					<%= check_box_tag '', '', task.done, {'data-id' => task.id, 'data-project_id' => task.project_id} %>
 					<%= task.title %>
				</td>
				<td>
					<%= link_to "delete", project_task_path(task.project_id, task.id), method: :delete, data: {confirm: "are you sure?"},
					:class => 'mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent'%>

				</td>
			</tr>
		<% end %>

	</tbody>
</table>


<%= form_for [@project, @project.tasks.build] do |f| %>
	<%= f.text_field :title, :class => 'mdl-textfield mdl-js-textfield ' %>
	<%= f.submit  :class => 'mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent'%>
<% end %>


<script>
 $(function() {
	 $("input[type=checkbox]").click(function() {
		 $.post('/projects/' + $(this).data('project_id') + '/tasks/' + $(this).data('id') + '/toggle')
	 });
 });
</script>


<%= link_to t('.back', :default => t("helpers.links.back")),
	projects_path, :class => 'btn btn-default'  %>
<%= link_to t('.edit', :default => t("helpers.links.edit")),
	edit_project_path(@project), :class => 'btn btn-default' %>
<%= link_to t('.destroy', :default => t("helpers.links.destroy")),
	project_path(@project),
	:method => 'delete',
	:data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
		:class => 'btn btn-danger' %>
